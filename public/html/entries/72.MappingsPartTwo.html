<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Some Spring Stuff | Mappings Part Two</title>
    <link rel="icon" type="image/x-icon" href="../../images/SomeSpringStuff_LOGO.svg" />

</head>

<link href="../../css/style.css" rel="stylesheet">
<link href="../../css/code-in-text.css" rel="stylesheet">
<link href="../../css/extra-sections.css" rel="stylesheet">
<link href="../../css/code.css" rel="stylesheet">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>

<body class="bdy">

    <!-- Navigation bar -->
    <div class="container">
        <div class="row">
            <div class="col-md-10 col-sm-12">
                <nav class="navbar navbar-expand-md navbar-dark justify-content-center"
                     style="background-color: #203c96;">
                    <div class="container-fluid">
                        <p class="navbar-brand">Some Spring Stuff </p>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false"
                                aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarScroll">
                            <ul class="navbar-nav me-auto my-2 my-md-0 navbar-nav-scroll"
                                style="--bs-scroll-height: 100px;">
                                <!--                                <li class="nav-item">-->
                                <!--                                    <a class="nav-link" href="#">About the site</a>-->
                                <!--                                </li>-->
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarScrollingDropdown"
                                       role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        Project's structure
                                    </a>
                                    <ul class="dropdown-menu" aria-labelledby="navbarScrollingDropdown">
                                        <li><a class="dropdown-item" onclick="location.href='01.Introduciton.html'">Introduction to Spring Framework</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='11.SetUpIntellij.html'">Setting up IDE</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='12.SettingUpMaven.html'">Getting familiar with Maven</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='13.SettingUpServer.html'">Setting up Tomcat Server</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='21.InversionOfControlAndDependencyInjection.html'">Inversion of Control and Dependency Injection</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='22.ConfigurationFiles.html'">Configuration Files</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='23.Web.xmlAndDispatcher-servlet.html'">XML Configuration</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='31.FirstController.html'">First Controller</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='32.CreatingFirstFTLPages.html'">FTL Pages</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='00.MVC.html'">MVC Model</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='33.StartingWithDatabases.html'">Introduction to Databases</a></li>
                                        <li><a class="dropdown-item" onclick="location.href='331.JDBCAPI.html'">JDBC API</a></li>
                                        <li><a class="dropdown-item" onclick="location.href='332.JDBCTemplate.html'">JDBC Template</a></li>
                                        <li><a class="dropdown-item" onclick="location.href='333.HibernateORM.html'">Hibernate ORM</a></li>
                                        <li><a class="dropdown-item" onclick="location.href='334.JPA.html'">JPA</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='41.UserValidation.html'">User Validation</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='51.News.EntityAndValidation.html'">Adding Another Entity</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='61.SpringSecurityIntroduction.html'">Spring Security. Introduction</a></li>
                                        <li><a class="dropdown-item" onclick="location.href='62.SpringSecuritySomeOtherSecurityStuff.html'">Spring Security. Advanced Topics</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='71.MappingPartOne.html'">Mappings. Part One</a></li>
                                        <li><a class="dropdown-item" onclick="location.href='72.MappingsPartTwo.html'">Mappings. Part Two</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='81.Authorities.html'">Security. Authorities and Roles</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='91.ExceptionHandling.html'">Exception Handling</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='111.MailAPI.html'">Mail API. Sending Emails</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='121.Logging.html'">Logging</a></li>
                                        <li>
                                            <hr class="dropdown-divider">
                                        </li>
                                        <li><a class="dropdown-item" onclick="location.href='131.AOP.html'">AOP and Spring AOP</a></li>
                                    </ul>
                                </li>
                                <!--                                <li class="nav-item">-->
                                <!--                                    <a class="nav-link" href="#">Roadmap</a>-->
                                <!--                                </li>-->
                                <!--                                <li class="nav-item">-->
                                <!--                                    <a class="nav-link" onclick="location.href='links.html'">Links</a>-->
                                <!--                                </li>-->
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
            <div class="d-none d-md-block col-md-2">
            </div>
        </div>
    </div>





    <main role="main" class="container">

        <div class="row">
            <!-- Main content body -->
            <div class="col-md-10 col-xs-12">
                <h1 class="display-3 text-center page-title">Mappings. Part Two</h1>
                <section>
                    <div class="paragraph">
                        <p>I want to record a <span class="text-class-name"></span>User</span> that creates News. In the
                            future I will
                            display some information about that <span class="text-class-name">User</span> on the page
                            that shows more
                            information about an article.
                        </p>
                    </div>
                </section>

                <section>
                    <h4 class="section-title">How to add a User to News object</h4>
                    <div class="paragraph">
                        <p>We can set a <span class="text-class-name">User</span> by calling an appropriate setter
                            method. If after that
                            <span class="text-class-name">News</span> is saved by its repository then this <span
                                class="text-class-name">News</span> will also be automatically added to the <span
                                class="text-class-name">User</span>’s list of <span class="text-class-name">News</span>.
                            We can do that like this:
                        </p>
                        <p class="file-name">
                            NewsController.class:
                        </p>
                        <div class="code-container">
                            <div class="code-block" style="overflow-y:auto;">
                                <p><span class="annotation">@Controller</span> </p>
                                <p><span class="annotation">@RequestMapping</span> (<span class="string">"news"</span>)
                                </p>
                                <p><span class="key-word">public</span> <span class="key-word">class</span>
                                    NewsController { </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="comment">// ... </span></p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="annotation">@PostMapping</span> (<span
                                        class="string">"/add"</span>) </p>
                                <p>&#160;&#160;&#160;&#160;<span class="key-word">public</span> String addNewsPost
                                    (<span class="annotation">@ModelAttribute</span> <span
                                        class="annotation">@Valid</span> News news, BindingResult result) { </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="key-word">if</span>
                                    (result.hasErrors()) { </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span
                                        class="key-word">return</span> <span
                                        class="string">"/news/createNews"</span><span class="key-word">; </span><span
                                        class="comment">// this will automatically pass News object with all associated
                                        errors back to the form. </span></p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;newsValidator.validate(news, result)
                                </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="key-word">if</span>
                                    (result.hasErrors()) { </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span
                                        class="key-word">return</span> <span
                                        class="string">"/news/createNews"</span><span class="key-word">; </span></p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="comment">// If no errors
                                        occurred, we want to save this new News object in our database. </span></p>
                                <br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="comment">// setting a
                                        User </span></p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;news.setUser(...) <span
                                        class="key-word">; </span><span class="comment">// how do we get User? </span>
                                </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;newsService.save(news) <span
                                        class="key-word">; </span></p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="key-word">return</span>
                                    <span class="string">"index"</span><span class="key-word">; </span>
                                </p>
                                <p>&#160;&#160;&#160;&#160;} </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="comment">// ... </span></p>
                                <p>} </p>
                            </div>
                        </div>

                    </div>
                    <div class="paragraph">
                        <p>But how do we get a <span class="text-class-name">User</span> object to associate with a
                            <span class="text-class-name">News</span> object? Well, in our application only authorised
                            users can interact
                            with news.
                            That means that every one of them will have an authentication token (remember the <span
                                class="text-class-name"></span><span class="text-class-name">AuthProvider</span> </span>
                            class we’ve
                            created?). From
                            that token we can get principal that, in our case, are equal to the user’s email.
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>So, let’s create a new class that will be responsible for extracting the <span
                                class="text-class-name">User</span> class
                            from the authentication token.</p>
                    </div>
                    <div class="paragraph">
                        <p>There is a special class in Spring called <span
                                class="text-class-name"></span>SecurityContextHolder</span>
                            that holds
                            some security stuff and more importantly - an authentication instance. From that instance we
                            can get the
                            principle and
                            use it to then find the <span class="text-class-name">User</span>.</p>
                    </div>
                    <div class="paragraph">
                        <p>Do the following:</p>

                        <ul class="list-unstyled">
                            <ul>
                                <li>
                                    Create ContextProvider class
                                </li>
                                <li>

                                    Write a method in the class that returns a User
                                    by obtaining
                                    its details from the
                                    authentication token.
                                </li>
                            </ul>
                        </ul>
                    </div>
                    <div class="paragraph">
                        <p>This is how I did it:</p>
                        <p class="file-name">
                            ContextProvider.class:
                        </p>
                        <div class="code-container">
                            <div class="code-block" style="overflow-y:auto;">
                                <p><span class="annotation">@Component</span> </p>
                                <p><span class="key-word">public</span> <span class="key-word">class</span>
                                    ContextProvider { </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="annotation">@Autowired</span> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="key-word">private</span> UserService
                                    userService<span class="key-word">; </span></p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="key-word">public</span> User getUser () { </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SecurityContext context =
                                    SecurityContextHolder.getContext() <span class="key-word">; </span><span
                                        class="comment">// securityContext contains security </span></p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="comment">// information
                                        about a thread that a current User uses </span></p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Authentication authentication =
                                    context.getAuthentication() <span class="key-word">; </span><span class="comment">//
                                        getting authentication token from the securityContext </span></p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;String principle =
                                    authentication.getPrincipal().toString()<span class="key-word">; </span><span
                                        class="comment">// getting email from the authentication token </span></p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;User user =
                                    userService.findUser(principle) <span class="key-word">; </span></p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="key-word">if</span>
                                    (user == <span class="key-word">null</span>) {</p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span
                                        class="key-word">throw new</span> NoSuchUserFoundException() <span class="key-word">;
                                    </span></p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span
                                        class="key-word">return</span> user<span class="key-word">; </span></p>
                                <p>&#160;&#160;&#160;&#160;} </p><br />
                                <p> </p>
                                <p>} </p>
                            </div>
                        </div>

                    </div>
                    <div class="paragraph">
                        <p>Back to the <span class="text-class-name"></span>NewsController</span> . Now we can set the
                            <span class="text-class-name">User</span> to a <span class="text-class-name">News</span>
                            object that we create
                            in the
                            <span class="code">addNewsPost()</span> method:
                        </p>

                        <p class="file-name">
                            NewsController.class:
                        </p>
                        <div class="code-container">
                            <div class="code-block" style="overflow-y:auto;">
                                <p><span class="annotation">@Controller</span> </p>
                                <p><span class="annotation">@RequestMapping</span> (<span class="string">"news"</span>)
                                </p>
                                <p><span class="key-word">public</span> <span class="key-word">class</span>
                                    NewsController { </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="comment">// ... </span></p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="annotation">@Autowired</span> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="key-word">private</span> ContextProvider
                                    contextProvider<span class="key-word">; </span><span class="comment">// don't forget
                                        to autowire our ContextProvider </span></p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="annotation">@PostMapping</span> (<span
                                        class="string">"/add"</span>) </p>
                                <p>&#160;&#160;&#160;&#160;<span class="key-word">public</span> String addNewsPost
                                    (<span class="annotation">@ModelAttribute</span> <span
                                        class="annotation">@Valid</span> News news, BindingResult result) { </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="key-word">if</span>
                                    (result.hasErrors()) { </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span
                                        class="key-word">return</span> <span
                                        class="string">"/news/createNews"</span><span class="key-word">; </span><span
                                        class="comment">// this will automatically pass News object with all associated
                                        errors back to the form. </span></p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;newsValidator.validate(news, result)<span class="key-word">; </span>
                                </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="key-word">if</span>
                                    (result.hasErrors()) { </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span
                                        class="key-word">return</span> <span
                                        class="string">"/news/createNews"</span><span class="key-word">; </span></p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="comment">// If no errors
                                        occurred, we want to save this new News object in our database. </span></p>
                                <br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="comment">// setting a
                                        User </span></p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;news.setUser(contextProvider.getUser())
                                    <span class="key-word">; </span><span class="comment">// this is how we get User!
                                    </span>
                                </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;newsService.save(news) <span
                                        class="key-word">; </span></p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="key-word">return</span>
                                    <span class="string">"index"</span><span class="key-word">; </span>
                                </p>
                                <p>&#160;&#160;&#160;&#160;} </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="comment">// ... </span></p>
                                <p>} </p>
                            </div>
                        </div>

                    </div>
                    <div class="paragraph">
                        <p>Wonderful.</p>
                    </div>
                    <div class="paragraph">
                        <p>I say we add some information about the author <span class="text-class-name">User</span> to
                            each page that
                            displays
                            <span class="text-class-name">News</span> in more details.
                        </p>
                        <p class="file-name">
                            NewsController.class:
                        </p>
                        <div class="code-container">
                            <div class="code-block" style="overflow-y:auto;">
                                <p><span class="annotation">@Controller</span> </p>
                                <p><span class="annotation">@RequestMapping</span> (<span class="string">"news"</span>)
                                </p>
                                <p><span class="key-word">public</span> <span class="key-word">class</span>
                                    NewsController { </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="comment">// ... </span></p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="annotation">@GetMapping</span> (<span
                                        class="string">"/view/{id}"</span>) </p>
                                <p>&#160;&#160;&#160;&#160;<span class="key-word">public</span> String getANewsArticle
                                    (<span class="annotation">@PathVariable</span> (name =) <span
                                        class="key-word">int</span> id, Model model) { </p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;News news = newsService.getNews(id)
                                    <span class="key-word">; </span>
                                </p>
                                <p><br /></p>

                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                                    model.addAttribute(<span class="string">"article"</span> news);</p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                                    model.addAttribute(<span class="string">"user"</span>, news.getUser()); <span
                                        class="comment">// this is how we pass the user of
                                        our news</span>.</p>
                                <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="key-word">return</span>
                                    <span class="string">"/news/article"</span><span class="key-word">; </span>
                                </p>
                                <br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;} </p><br />
                                <p> </p>
                                <p>&#160;&#160;&#160;&#160;<span class="comment">// ... </span></p>
                                <p>} </p>
                            </div>
                        </div>

                        <div class="text-image">
                            <p>article.ftl:</p>
                            <img src="../../images/entries/72/7.2.1Pic15.png" class="mx-auto d-block">
                        </div>

                    </div>
                    <div class="paragraph">
                        <p>There are some other types of mapping as we have discussed before. If you would like to learn
                            how to work
                            with them, I advise you to read the extra-section just beneath.</p>
                    </div>
                </section>

                <section>
                    <h1 class="display-3 text-center page-title">Extra sections</h1>
                </section>

                <section id="mappings">
                    <h4 class="section-title">Additional Mappings</h4>
                    <button type="button" class="extra-section">Expand/Roll up</button>
                    <div class="extra-section-content">
                    <section>
                        <div class="paragraph">
                            <p>We looked in detail at how to work with Many-to-One mapping in Spring.</p>
                        </div>
                        <div class="paragraph">
                            <p>But remember we still have One-to-One and Many-to-Many mapping.</p>
                        </div>
                        <div class="paragraph">
                            <p>To those who have forgotten when what type of mapping is used:</p>
                        </div>
                        <div class="paragraph">
                            <p><b>One-to-One</b>: every object is connected to a single object</p>
                            <p> <b>Many-to-Many</b>: every object can be connected to as much other objects as it wants</p>
                        </div>
                        <div class="paragraph">
                            <p> One to Many / Many to One: one object is mapped to many objects of another type.</p>
                        </div>
                        <div class="paragraph">
                            <p>I will give you an example of how to set up Many-to-Many and One-to-One mappings using Hibernate annotations.
                            </p>
                        </div>
                        <div class="paragraph">
                            <p> For the examples below I will modify our <span class="text-class-name">User</span> and <span
                                    class="text-class-name">News</span> models’ relations, but then I will return everything back.</p>
                        </div>
                    </section>
                    <section>
                        <h4 class="section-title">Many-to-Many</h4>
                        <div class="paragraph">
                            <p>Every <span class="text-class-name">User</span> can be linked to many <span
                                    class="text-class-name">News</span> to show
                                that he/she viewed that <span class="text-class-name">News</span>. And every <span
                                    class="text-class-name">News</span>
                                object can have many <span class="text-class-name">User</span> objects that have seen it. Thus this is a
                                Many-to-Many
                                relation.</p>
                        </div>
                        <div class="paragraph">
                            <p>Believe it or not, but Many-to-Many mapping is a bit simpler, so we will start with it.</p>
                        </div>
                        <div class="paragraph">
                            <p>Tell me, how would you go about linking together many objects to many other objects from two different tables
                                in our
                                database?</p>
                        </div>
                        <div class="paragraph">
                            <p>The standard approach is to create a new table that will only contain foreign keys for both objects from the
                                tables.</p>
                        </div>
                        <div class="paragraph">
                            <p>So, here are the steps that we are going to take:</p>
                        </div>
                        <div class="sub-section">
                            <h6 class="sub-section-title">Step 1: Create table with foreign keys in it</h6>
                            <div class="paragraph">
                                <div class="text-image">
                                    <p>SQL commands:</p>
                                    <img src="../../images/entries/21/2.1.1IffoCOptionOne.png" class="mx-auto d-block">
                                </div>
                            </div>
                            <div class="paragraph">
                                <p>Because connections are unique (a certain <span class="text-class-name">User</span> can only be connected
                                    to a certain
                                    <span class="text-class-name">News</span> only once), we don’t need a seperate id column. We can have a
                                    composite
                                    primary key that is made out of user_id and news_id.
                                </p>
                            </div>
                            <div class="paragraph">
                                <div class="text-image">
                                    <p>Your final table should look something like this:</p>
                                    <img src="../../images/entries/21/2.1.ff.png" class="mx-auto d-block">
                                </div>
                            </div>
                            <div class="paragraph">
                                <p>Table which contains only foreign keys is called a join table.</p>
                            </div>
                        </div>
                        <div class="sub-section">
                            <h6 class="sub-section-title">Step 2: Adding Java code</h6>
                    
                    
                    
                    
                            <div class="paragraph">
                                <p>Second part is to add appropriate new fields into the <span class="text-class-name">User</span> and <span
                                        class="text-class-name">News</span> entities and then annotate them so that they link to the table
                                    we’ve just
                                    created.</p>
                            </div>
                            <div class="paragraph">
                                <p>In both <span class="text-class-name">User</span> and <span class="text-class-name">News</span> we need
                                    to create List
                                    and annotate it like this:</p>
                            </div>
                            <div class="paragraph">
                                <p class="file-name">User.class:</p>
                                [Code]
                            </div>
                            <div class="paragraph">
                                <p class="file-name">News.class:</p>
                                [Code]
                            </div>
                            <div class="paragraph">
                                <p>Note that <span class="text-annotation">@JoinTable</span> annotation stores information about the table with our foreign
                                    keys. It does not matter whether you put that <span class="text-annotation">@JoinTable</span> annotation in <span
                                        class="text-class-name">News</span> or <span class="text-class-name">User</span> class, just be sure that in the
                                    other you then add the mappedBy parameter inside the <span class="text-annotation">@ManyToMany</span> annotation.</p>
                            </div>
                        </div>
                    </section>
                    
                    
                    <section>
                        <h4 class="section-title">One-to-One mapping</h4>
                        <div class="paragraph">
                            <p>Let’s say that now in our portal every <span class="text-class-name">User</span> can create only a single <span
                                class="text-class-name">News</span> article. I don’t know why, but let it be so.</p>
                        </div>
                        <div class="paragraph">
                            <p>In that case, we will need a One to One mapping.</p>
                        </div>
                        <div class="sub-section">
                            <h6 class="sub-section-title">Step 1: Updating a table</h6>
                    
                    
                    
                            <div class="paragraph">
                                <p>When creating One-to-One mapping all you will need is a bit of enthusiasm and a single foreign key.</p>
                            </div>
                            <div class="paragraph">
                                <p>It doesn't really matter to which table you will add it. Well, at least in terms of coding it changes nothing.</p>
                            </div>
                            <div class="paragraph">
                                <div class="text-image">
                                    <p>I want to add a foreign key into “users” table that will be linked to the “news” table:</p>
                                    <img src="../../images/entries/21/2.1.1IoCOptionOne.png" class="mx-auto d-block">
                            </div>
                            </div>
                            <div class="paragraph">
                                <p>I won't even bother showing you what SQL statements I have written to create this new column, because I know that you
                                    can do it yourself.</p>
                            </div>
                        </div>
                        <div class="sub-section">
                            <h6 class="sub-section-title">Step 2: Write some Java code</h6>
                            <div class="paragraph">
                                <p>Because it is One to One mapping, both <span class="text-class-name">User</span> and <span
                                        class="text-class-name">News</span> need to have an object of another class inside them, and those object should
                                    have proper annotations:</p>
                            </div>
                            <div class="paragraph">
                                <p class="file-name">User.class:</p>
                                [Code]
                            </div>
                            <div class="paragraph">
                                <p class="file-name">News.class:</p>
                                [Code]
                            </div>
                            <div class="paragraph">
                                <p>Note that we add the <span class="text-annotation">@JoinColumn</span> annotation to the class with the foreign key
                                    column inside its table.</p>
                            </div>
                            <div class="paragraph">
                                <p>
                                    That concludes the most basic amount of the operations you should know how to conclude when working with mapping in
                                    Spring JPA.</p>
                            </div>
                        </div>
                    </section>
                </div>
                    
                    
                </section>
            </div>
            <!-- adverts -->
<!--            <div class="col-md-2 col-xs-12">-->
<!--                <div class="advert-v" style="background-color: blueviolet;">-->
<!--                    <p>FCGHVIUOJ</p>-->
<!--                </div>-->
<!--                <div class="advert-v" style="background-color: blueviolet;">-->
<!--                    <p>FCGHVIUOJ</p>-->
<!--                </div>-->
<!--                <div class="advert-v" style="background-color: blueviolet;">-->
<!--                    <p>FCGHVIUOJ</p>-->
<!--                </div>-->
<!--                <div class="advert-v" style="background-color: blueviolet;">-->
<!--                    <p>FCGHVIUOJ</p>-->
<!--                </div>-->
<!--            </div>-->

            <!-- Bottom navigation pannel -->
            <div class="col-12">
                <div class="container">
                    <div class="row">
                        <div class="col-6">
                            <button class="nav-button" onclick="location.href='71.MappingPartOne.html'" type="button">
                                Previous topic: Mappings. Part One
                            </button>
                        </div>
                        <div class="col-6">
                            <button class="nav-button mx-auto d-block" onclick="location.href='81.Authorities.html'" type="button">
                                Next topic: Security. Authorities and Roles
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <!-- photo -->
                <div class="col-md-4 col-sm-5 col-xs-12" id="logo-container">
                    <div class="logo-container">
                        <img src="../../images/adtimokhinLOGOfooter.svg" class="mx-auto d-block">
                    </div>
                </div>
                <!-- Other action buttons -->
                <div class="col-md-4 col-sm-2 col-xs-6">
                    <a href="#" class="footer-link-title">Contact</a>
                    <a href="https://github.com/adtimokhin/" target="_blank" class="footer-link">GitHub</a>
                    <a href="https://www.linkedin.com/in/aleksandr-timokhin-5300361b6" target="_blank"
                        class="footer-link">LinkedIn</a>
                    <a href="https://www.instagram.com/adtimokhin/" target="_blank" class="footer-link">Instagram</a>
                </div>

                <div class="col-md-4 col-sm-3 col-xs-6">
                    <a href="#" class="footer-link-title">Terms & policy</a>
                </div>
            </div>
        </div>
    </footer>

        <!-- Scripts -->
        <script>
            var coll = document.getElementsByClassName("extra-section");
            var i;
    
            for (i = 0; i < coll.length; i++) {
                coll[i].addEventListener("click", function () {
                    this.classList.toggle("active");
                    var content = this.nextElementSibling;
                    if (content.style.display === "block") {
                        content.style.display = "none";
                    } else {
                        content.style.display = "block";
                    }
                });
            }
        </script>

</body>

</html>